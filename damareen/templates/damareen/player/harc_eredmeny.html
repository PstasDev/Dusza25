{% extends 'damareen/base.html' %}

{% block title %}Harc eredmÃ©nye{% endblock %}

{% block extra_css %}
<style>
    .battle-result {
        text-align: center;
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
        font-size: 28px;
        font-weight: bold;
        font-family: 'Cinzel', serif;
        text-transform: uppercase;
        letter-spacing: 3px;
    }
    
    .battle-result.victory {
        background: linear-gradient(135deg, rgba(46, 125, 50, 0.4) 0%, rgba(27, 94, 32, 0.4) 100%);
        border: 3px solid #4caf50;
        color: #90ee90;
        text-shadow: 0 0 20px rgba(76, 175, 80, 0.8);
        box-shadow: 0 0 30px rgba(76, 175, 80, 0.4);
    }
    
    .battle-result.defeat {
        background: linear-gradient(135deg, rgba(211, 47, 47, 0.4) 0%, rgba(183, 28, 28, 0.4) 100%);
        border: 3px solid #f44336;
        color: #ff6b6b;
        text-shadow: 0 0 20px rgba(244, 67, 54, 0.8);
        box-shadow: 0 0 30px rgba(244, 67, 54, 0.4);
    }
    
    .battle-grid {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 30px;
        align-items: start;
        margin: 30px 0;
        padding: 20px;
        background: rgba(20, 20, 40, 0.4);
        border-radius: 12px;
        border: 1px solid rgba(218, 165, 32, 0.2);
    }
    
    .battle-card {
        text-align: center;
        padding: 15px;
    }
    
    .battle-card.player {
        border-right: 2px solid rgba(52, 152, 219, 0.3);
    }
    
    .battle-card.enemy {
        border-left: 2px solid rgba(211, 47, 47, 0.3);
    }
    
    .battle-vs {
        text-align: center;
        font-size: 48px;
        color: #daa520;
        text-shadow: 0 0 20px rgba(218, 165, 32, 0.6);
        font-family: 'Cinzel', serif;
    }
    
    .battle-outcome {
        margin-top: 20px;
        padding: 15px;
        border-radius: 8px;
        font-size: 16px;
        text-align: center;
    }
    
    .battle-outcome.win {
        background: rgba(46, 125, 50, 0.3);
        border: 2px solid #4caf50;
        color: #90ee90;
    }
    
    .battle-outcome.lose {
        background: rgba(211, 47, 47, 0.3);
        border: 2px solid #f44336;
        color: #ff6b6b;
    }
    
    .round-number {
        display: inline-block;
        background: linear-gradient(135deg, #8b4513 0%, #654321 100%);
        color: #daa520;
        padding: 8px 20px;
        border-radius: 20px;
        font-family: 'Cinzel', serif;
        font-weight: 600;
        margin-bottom: 20px;
        border: 2px solid rgba(218, 165, 32, 0.5);
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
</style>
{% endblock %}

{% block content %}
<h2>âš”ï¸ Harc eredmÃ©nye</h2>

<div class="card">
    <h3>{{ harc.kazamata.nev }}</h3>
    <p><strong>{{ harc.kazamata.get_tipus_display }}</strong></p>
    <p>IdÅ‘pont: {{ harc.inditas|date:"Y.m.d H:i" }}</p>
</div>

<div class="battle-result {% if harc.jatekos_gyozott %}victory{% else %}defeat{% endif %}">
    {% if harc.jatekos_gyozott %}
        ğŸ‰ GYÅZELEM! ğŸ‰
    {% else %}
        ğŸ˜ VERESÃ‰G ğŸ˜
    {% endif %}
</div>

{% if harc.jatekos_gyozott %}
<div class="card" style="text-align: center; border-left-color: #4caf50;">
    <h3 style="color: #90ee90;">ğŸ† Jutalom</h3>
    <p style="font-size: 20px; color: #daa520;">{{ harc.kazamata.get_nyeremeny_leiras }}</p>
</div>
{% else %}
<div class="card" style="text-align: center; border-left-color: #f44336;">
    <p style="font-size: 18px; color: #ff6b6b;">
        PrÃ³bÃ¡ld Ãºjra vagy Ã¡llÃ­ts Ã¶ssze Ãºj paklit!
    </p>
</div>
{% endif %}

<div class="card" style="margin-top: 30px;">
    <h3>ğŸ“Š ÃœtkÃ¶zetek rÃ©szletei</h3>
    
    {% for utkÃ¶zet in utkÃ¶zetek %}
    <div style="margin: 30px 0;">
        <div style="text-align: center;">
            <span class="round-number">âš”ï¸ ÃœtkÃ¶zet #{{ utkÃ¶zet.sorrend }}</span>
        </div>
        
        <div class="battle-grid">
            <!-- JÃ¡tÃ©kos kÃ¡rtya -->
            <div class="battle-card player">
                <h4 style="color: #64b5f6; font-size: 22px;">ğŸ‘¤ SajÃ¡t kÃ¡rtya</h4>
                <div class="kartya kartya-{{ utkÃ¶zet.jatekos_tipus }}" style="margin: 15px auto; max-width: 250px;">
                    <h3>{{ utkÃ¶zet.jatekos_kartya.eredeti_kartya.nev }}</h3>
                    <div class="kartya-stat">
                        <span>âš”ï¸ SebzÃ©s:</span>
                        <span style="color: #daa520;">{{ utkÃ¶zet.jatekos_sebzes }}</span>
                    </div>
                    <div class="kartya-stat">
                        <span>â¤ï¸ Ã‰leterÅ‘:</span>
                        <span style="color: #e74c3c;">{{ utkÃ¶zet.jatekos_eletero }}</span>
                    </div>
                    <div style="margin-top: 10px; text-align: center;">
                        <span class="elem-icon elem-{{ utkÃ¶zet.jatekos_tipus }}">
                            {{ utkÃ¶zet.get_jatekos_tipus_display }}
                        </span>
                    </div>
                </div>
            </div>
            
            <!-- VS -->
            <div class="battle-vs">
                âš”ï¸
            </div>
            
            <!-- Kazamata kÃ¡rtya -->
            <div class="battle-card enemy">
                <h4 style="color: #ff6b6b; font-size: 22px;">ğŸ° EllensÃ©g</h4>
                <div class="kartya kartya-{{ utkÃ¶zet.kazamata_tipus }}" style="margin: 15px auto; max-width: 250px;">
                    <h3>
                        {% if utkÃ¶zet.kazamata_kartya_ref.vilag_kartya %}
                            {{ utkÃ¶zet.kazamata_kartya_ref.vilag_kartya.nev }}
                        {% else %}
                            {{ utkÃ¶zet.kazamata_kartya_ref.vezer_kartya.nev }} ğŸ‘‘
                        {% endif %}
                    </h3>
                    <div class="kartya-stat">
                        <span>âš”ï¸ SebzÃ©s:</span>
                        <span style="color: #daa520;">{{ utkÃ¶zet.kazamata_sebzes }}</span>
                    </div>
                    <div class="kartya-stat">
                        <span>â¤ï¸ Ã‰leterÅ‘:</span>
                        <span style="color: #e74c3c;">{{ utkÃ¶zet.kazamata_eletero }}</span>
                    </div>
                    <div style="margin-top: 10px; text-align: center;">
                        <span class="elem-icon elem-{{ utkÃ¶zet.kazamata_tipus }}">
                            {{ utkÃ¶zet.get_kazamata_tipus_display }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="battle-outcome {% if utkÃ¶zet.jatekos_nyert %}win{% else %}lose{% endif %}">
            <strong>
                {% if utkÃ¶zet.jatekos_nyert %}
                    âœ… JÃ¡tÃ©kos gyÅ‘zÃ¶tt
                {% else %}
                    âŒ Kazamata gyÅ‘zÃ¶tt
                {% endif %}
            </strong>
            <br>
            <span style="font-size: 14px; opacity: 0.9;">{{ utkÃ¶zet.gyoztes_ok }}</span>
        </div>
    </div>
    {% endfor %}
</div>

<div style="margin-top: 40px; text-align: center;">
    {% if harc.jatekos_gyozott %}
        <a href="{% url 'damareen:jutalom_valaszt' jatek.id harc.id %}" class="btn btn-success" style="font-size: 18px;">
            ğŸ Jutalom Ã¡tvÃ©tele
        </a>
    {% else %}
        <a href="{% url 'damareen:game_view' jatek.id %}" class="btn" style="font-size: 18px;">
            ğŸ”™ Vissza a jÃ¡tÃ©khoz
        </a>
    {% endif %}
</div>
{% endblock %}
